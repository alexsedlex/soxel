(function(e){function t(t){for(var n,r,l=t[0],o=t[1],c=t[2],p=0,d=[];p<l.length;p++)r=l[p],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},s={app:0},i=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/soxel/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;i.push([1,"chunk-vendors"]),a()})({0:function(e,t){},1:function(e,t,a){e.exports=a("cd49")},2:function(e,t){},2395:function(e,t,a){},3:function(e,t){},4763:function(e,t,a){"use strict";a("afdd")},"557b":function(e,t,a){"use strict";a("95ad")},"74b6":function(e,t,a){},"7c55":function(e,t,a){"use strict";a("2395")},"857b":function(e,t,a){},"93cc":function(e,t,a){"use strict";a("74b6")},"95ad":function(e,t,a){},afdd:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=a("289d"),i=(a("5abe"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Menu"),a("router-view",{staticClass:"page-content"})],1)}),r=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-navbar",{attrs:{shadow:""}},[a("template",{slot:"brand"},[a("b-navbar-item",[a("router-link",{attrs:{to:"/home"}},[e._v(" SOXEL v2.0 ")])],1)],1),a("template",{slot:"start"},[a("b-navbar-item",[a("router-link",{attrs:{to:"/generate-bloctel"}},[e._v(" Générer une demande bloctel ")])],1),a("b-navbar-item",[a("router-link",{attrs:{to:"/apply-bloctel"}},[e._v(" Intégrer une réponse bloctel ")])],1)],1),a("template",{slot:"end"},[e._v(" Copyright Alex Morel ")])],2)},o=[],c=a("d4ec"),u=a("262e"),p=a("2caf"),d=a("9ab4"),b=a("1b40"),f=function(e){Object(u["a"])(a,e);var t=Object(p["a"])(a);function a(){return Object(c["a"])(this,a),t.apply(this,arguments)}return a}(b["b"]);f=Object(d["a"])([b["a"]],f);var h=f,v=h,m=(a("4763"),a("2877")),g=Object(m["a"])(v,l,o,!1,null,null,null),C=g.exports,y=(a("5363"),{name:"App",components:{Menu:C}}),_=y,k=(a("7c55"),Object(m["a"])(_,i,r,!1,null,null,null)),O=k.exports,F=a("8c4f"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-steps",{attrs:{animated:!0,rounded:!0,clickable:!0,"has-navigation":!1},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[a("b-step-item",{attrs:{step:"1",label:"Fichier Base",clickable:!0}},[a("div",{staticClass:"content"},[a("h1",{staticClass:"title has-text-centered"},[e._v("Fichier Base")]),a("b-message",{attrs:{type:"is-info"}},[e._v(' Le fichier "base" correspond au listing complet avec nom, numéro de téléphone etc. '),a("br"),e._v(' Les colonnes "H", "I", "J" et "K" doivent correspondre à des numéros de téléphones. ')]),a("b-upload",{staticClass:"file-label",attrs:{accept:".ods",multiple:""},model:{value:e.baseFile,callback:function(t){e.baseFile=t},expression:"baseFile"}},[a("span",{staticClass:"file-cta"},[a("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),a("span",{staticClass:"file-label"},[e._v(" Renseignez le fichier Excel Base (format ods)")])],1),e.baseFile.length>0?a("span",{staticClass:"file-name"},[e._v(" "+e._s(e.baseFile[0].name)+" ")]):e._e()])],1)]),a("b-step-item",{attrs:{step:"2",label:"Réponse Bloctel",clickable:e.baseFile.length>0}},[a("div",{staticClass:"content"},[a("h1",{staticClass:"title has-text-centered"},[e._v("Réponse Bloctel")]),a("b-message",{attrs:{type:"is-info"}},[e._v(" La réponse bloctel doit avoir 3 colonnes : le numéro, l'identifiant, et la réponse bloctel. ")]),a("b-upload",{staticClass:"file-label",attrs:{accept:".csv",multiple:""},model:{value:e.answerFile,callback:function(t){e.answerFile=t},expression:"answerFile"}},[a("span",{staticClass:"file-cta"},[a("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),a("span",{staticClass:"file-label"},[e._v(' Renseignez le fichier Bloctel (format csv, commence par "retour_")')])],1),e.answerFile.length>0?a("span",{staticClass:"file-name"},[e._v(" "+e._s(e.answerFile[0].name)+" ")]):e._e()])],1)]),a("b-step-item",{attrs:{step:"3",label:"Résultat",clickable:e.baseFile.length>0&&e.answerFile.length>0}},[a("div",{staticClass:"content"},[a("h1",{staticClass:"title has-text-centered"},[e._v("Résultat")]),a("b-loading",{model:{value:e.isCalculating,callback:function(t){e.isCalculating=t},expression:"isCalculating"}}),e.isCalculating?a("span",[e._v(" Calcul en cours... "),a("br"),e.infoCounter>=0?a("span"):e._e(),a("br"),a("b-message",{attrs:{type:"is-info"}},[e._v(" "+e._s(e.randomInfo)+" ")])],1):e.error?a("div",[a("b-message",{attrs:{type:"is-danger"}},[e._v(e._s(e.error))])],1):a("div",[a("b-message",{attrs:{type:"is-success"}},[e._v("Calcul terminé ! "),a("br"),a("span",{domProps:{innerHTML:e._s(e.success)}})]),a("b-message",{attrs:{type:"is-warning"}},[e._v("Merci bisous merci ❤️")])],1)],1)])],1)},w=[],x=(a("4795"),a("bee2")),S=(a("4160"),a("caad"),a("ace4"),a("0d03"),a("b0c0"),a("d3b7"),a("ac1f"),a("25f0"),a("2532"),a("5319"),a("1276"),a("498a"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("159b"),a("1146")),I=a.n(S);function E(e,t){var a=new FileReader;a.onload=function(a){if(a.target&&a.target.result){var n=new Uint8Array(a.target.result),s=I.a.read(n,{type:"array"}),i=T(s),r="data:text/csv;charset=utf-8,";r+="Telephone;Identifiant\n";var l=1;i.phonesNumber.forEach((function(e){var t=(""+e).trim();t.length<10&&(t="0"+t),r+=t.toString()+";"+l.toString()+"\n",l++}));var o=e[0].name.replace(".ods","").trim().substring(0,15)+"- DEMANDE BLOCTEL.csv",c=encodeURI(r),u=document.createElement("a");u.setAttribute("href",c),u.setAttribute("download",o),document.body.appendChild(u),u.click();t("","Le fichier contient "+i.lines+" lignes dont "+i.phonesNumber.length+" numéros de téléphones à à vérifier")}},a.readAsArrayBuffer(e[0])}function R(e,t,a){var n=new FileReader;n.onload=function(n){if(n.target&&n.target.result){var s=new Uint8Array(n.target.result),i=I.a.read(s,{type:"array"}),r=new FileReader;r.onload=function(t){if(t.target&&t.target.result){var n=t.target.result.toString();B(e,i,n,a)}},r.readAsText(t[0])}},n.readAsArrayBuffer(e[0])}function B(e,t,a,n){var s=M(a);console.error(s),L(e,t,s,n)}function L(e,t,a,n){var s=t.SheetNames[0],i=t.Sheets[s],r=0,l=0,o=0,c=2;while(r<=5&&c<5e3){console.error(r,c);var u=i["B"+c];u?(r=0,["H","I","J","K"].forEach((function(t){var s=i[t+c];if(s&&s.v){var r=s.v.trim();if(!r)return void n("La cellule '"+t+c+"' du fichier "+e[0].name+" devrait correspondre à l'identifiant bloctel mais j'ai trouvé '"+s.v+"', je me suis planté ou c'est toi ?","");a.includes(r)?(s.v=s.v+"",o++):(s.v="REJETE PAR BLOCTEL",l++)}}))):r++,c++}var p=e[0].name.replace(".ods","").trim().substring(0,15)+"-FUSION-BLOCTEL.ods";try{I.a.writeFile(t,p)}catch(d){n(d,"")}n("","- "+c+" lignes dans le fichier "+e[0].name+"<br/>- "+(l+o)+" numéros en tout dont<br/>- "+o+" numéros acceptés par bloctel et <br/>- "+l+" numéros écartés par bloctel")}function M(e){var t=[],a=e.split("\n");return a.forEach((function(e){var a=e.split(";");a[2]&&"OK"==a[2].trim()&&t.push(a[0].trim())})),t}function T(e){var t=[],a=e.SheetNames[0],n=e.Sheets[a],s=0,i=2;while(s<=5){var r=n["B"+i];r?function(){s=0;var e=!1;["H","K","I","J"].forEach((function(a){var s=n[a+i];!e&&s&&s.v&&s.v.trim().length>=4&&(t.push(s.v.trim()),e=!0)}))}():s++,i++}var l=new A;return l.lines=i,l.phonesNumber=t,l}var A=function e(){Object(c["a"])(this,e)},q=function(e){Object(u["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.activeStep=0,e.baseFile=[],e.answerFile=[],e.isCalculating=!1,e.error="",e.success="",e.infoCounter=1,e.randomInfo="",e}return Object(x["a"])(a,[{key:"baseFileChanged",value:function(){this.baseFile.length>0&&(this.activeStep=1)}},{key:"anwserFileChanged",value:function(){this.answerFile.length>0&&(this.activeStep=2,this.isCalculating=!0,setTimeout(this.launchCalculation,750))}},{key:"launchCalculation",value:function(){var e=this;this.isCalculating=!0,this.randomInfoUpdate(),R(this.baseFile,this.answerFile,(function(t,a){e.error=t,e.success=a,e.isCalculating=!1}))}},{key:"randomInfoUpdate",value:function(){this.refreshRandomInfo();var e=this;this.isCalculating&&setTimeout((function(){e.isCalculating&&e.randomInfoUpdate()}),5e3)}},{key:"refreshRandomInfo",value:function(){var e=["l'Everest gagne 4 mm de hauteur chaque année","le Canada a plus de lacs que le reste du monde combiné","bien qu'elle s'étende sur 5 fuseaux horaires, la Chine utilise l'heure de Pékin","une ville du Texas s'appelle Ding Dong","taumatawhakatangihangakoauauotamateaturipukakapikimaungahoronukupokaiwhenuakitanatahu est la colline au nom le plus long","pluton est plus petite que la Russie","50% de l'ADN humain est similaire à celui d'une banane","Le cœur d'une baleine bleue est si grand qu'un homme peut nager dans ses artères","Certaines tortues peuvent respirer par l'anus","Il y a 1,6 million de fourmis pour chaque être humain","la Reine est propriétaire de tous les esturgeons, les baleines et les dauphins dans les eaux situées à 3 miles de la Grande-Bretagne"];this.randomInfo="Savais-tu que "+e[Math.round(Math.random()*(e.length-1))]+"?"}}]),a}(b["b"]);Object(d["a"])([Object(b["c"])("baseFile")],q.prototype,"baseFileChanged",null),Object(d["a"])([Object(b["c"])("answerFile")],q.prototype,"anwserFileChanged",null),q=Object(d["a"])([Object(b["a"])({})],q);var P=q,U=P,N=(a("557b"),Object(m["a"])(U,j,w,!1,null,"7d81e2be",null)),D=N.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-steps",{attrs:{animated:!0,rounded:!0,clickable:!0,"has-navigation":!1},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[a("b-step-item",{attrs:{step:"1",label:"Fichier Base",clickable:!0}},[a("div",{staticClass:"content"},[a("h1",{staticClass:"title has-text-centered"},[e._v("Fichier Base")]),a("b-message",{attrs:{type:"is-info"}},[e._v(' Le fichier "base" correspond au listing complet avec nom, numéro de téléphone etc. '),a("br"),e._v(' Les colonnes "H", "I", "J" et "K" doivent correspondre à des numéros de téléphones. ')]),a("b-upload",{staticClass:"file-label",attrs:{accept:".ods",multiple:""},model:{value:e.baseFile,callback:function(t){e.baseFile=t},expression:"baseFile"}},[a("span",{staticClass:"file-cta"},[a("b-icon",{staticClass:"file-icon",attrs:{icon:"upload"}}),a("span",{staticClass:"file-label"},[e._v(" Renseignez le fichier Excel Base (format ods)")])],1),e.baseFile.length>0?a("span",{staticClass:"file-name"},[e._v(" "+e._s(e.baseFile[0].name)+" ")]):e._e()])],1)]),a("b-step-item",{attrs:{step:"2",label:"Résultat",clickable:e.baseFile.length>0}},[a("div",{staticClass:"content"},[a("h1",{staticClass:"title has-text-centered"},[e._v("Résultat")]),a("b-loading",{model:{value:e.isCalculating,callback:function(t){e.isCalculating=t},expression:"isCalculating"}}),e.isCalculating?a("span",[e._v(" Génération du fichier à envoyer à bloctel en cours... "),a("br"),e.infoCounter>=0?a("span"):e._e(),a("br"),a("b-message",{attrs:{type:"is-info"}},[e._v(" "+e._s(e.randomInfo)+" ")])],1):e.error?a("div",[a("b-message",{attrs:{type:"is-danger"}},[e._v(e._s(e.error))])],1):a("div",[a("b-message",{attrs:{type:"is-success"}},[e._v("Fichier à envoyer à bloctel généré ! Vous pouvez soumettre ce fichier csv "),a("a",{attrs:{href:"https://pro.bloctel.gouv.fr/mes-fichiers"}},[e._v(" directement sur bloctel ")]),a("br"),a("span",{domProps:{innerHTML:e._s(e.success)}})])],1)],1)])],1)},J=[],$=function(e){Object(u["a"])(a,e);var t=Object(p["a"])(a);function a(){var e;return Object(c["a"])(this,a),e=t.apply(this,arguments),e.activeStep=0,e.baseFile=[],e.isCalculating=!1,e.error="",e.success="",e.infoCounter=1,e.randomInfo="",e}return Object(x["a"])(a,[{key:"baseFileChanged",value:function(){this.baseFile.length>0&&(this.activeStep=1,this.isCalculating=!0,setTimeout(this.launchCalculation,500))}},{key:"launchCalculation",value:function(){var e=this;this.isCalculating=!0,this.randomInfoUpdate(),E(this.baseFile,(function(t,a){e.error=t,e.success=a,e.isCalculating=!1}))}},{key:"randomInfoUpdate",value:function(){this.refreshRandomInfo();var e=this;this.isCalculating&&setTimeout((function(){e.isCalculating&&e.randomInfoUpdate()}),5e3)}},{key:"refreshRandomInfo",value:function(){var e=["l'Everest gagne 4 mm de hauteur chaque année","le Canada a plus de lacs que le reste du monde combiné","bien qu'elle s'étende sur 5 fuseaux horaires, la Chine utilise l'heure de Pékin","une ville du Texas s'appelle Ding Dong","taumatawhakatangihangakoauauotamateaturipukakapikimaungahoronukupokaiwhenuakitanatahu est la colline au nom le plus long","pluton est plus petite que la Russie","50% de l'ADN humain est similaire à celui d'une banane","Le cœur d'une baleine bleue est si grand qu'un homme peut nager dans ses artères","Certaines tortues peuvent respirer par l'anus","Il y a 1,6 million de fourmis pour chaque être humain","la Reine est propriétaire de tous les esturgeons, les baleines et les dauphins dans les eaux situées à 3 miles de la Grande-Bretagne"];this.randomInfo="Savais-tu que "+e[Math.round(Math.random()*(e.length-1))]+"?"}}]),a}(b["b"]);Object(d["a"])([Object(b["c"])("baseFile")],$.prototype,"baseFileChanged",null),$=Object(d["a"])([Object(b["a"])({})],$);var G=$,z=G,K=(a("d266"),Object(m["a"])(z,H,J,!1,null,"9f592e2e",null)),Q=K.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("b",[e._v("Bienvenue sur Soxel !")]),a("br"),e._v(" Quelle action souhaitez-vous réaliser ? "),a("br"),a("br"),a("section",{staticClass:"hero"},[a("router-link",{attrs:{to:"/generate-bloctel"}},[a("b-button",{attrs:{type:"is-info"}},[e._v(" Générer une demande bloctel ")])],1),a("div",{staticStyle:{"padding-top":"20px"}}),a("br"),a("router-link",{attrs:{to:"/apply-bloctel"}},[a("b-button",{attrs:{type:"is-info"}},[e._v(" Intégrer une réponse bloctel ")])],1)],1)])},X=[],W=function(e){Object(u["a"])(a,e);var t=Object(p["a"])(a);function a(){return Object(c["a"])(this,a),t.apply(this,arguments)}return a}(b["b"]);W=Object(d["a"])([Object(b["a"])({})],W);var Y=W,Z=Y,ee=(a("93cc"),Object(m["a"])(Z,V,X,!1,null,"271aad14",null)),te=ee.exports;n["a"].use(F["a"]);var ae=[{path:"/",name:"Home2",component:te},{path:"/home",name:"Home",component:te},{path:"/apply-bloctel",name:"SoxelMapperApply",component:D},{path:"/generate-bloctel",name:"SoxelMapperGenerator",component:Q}],ne=new F["a"]({routes:ae}),se=ne;document.documentElement.style.setProperty("$primary","yellow"),n["a"].use(s["a"]),n["a"].config.productionTip=!1,new n["a"]({router:se,render:function(e){return e(O)}}).$mount("#app")},d266:function(e,t,a){"use strict";a("857b")}});
//# sourceMappingURL=app.b6ac9030.js.map